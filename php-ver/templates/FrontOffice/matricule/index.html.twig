{% extends 'base_front.html.twig' %}

{% set menu_matricule = true %}

{% block title %}Transfert crédit{% endblock %}

{% block stylesheets %} 
    {{ parent() }}
        <style>

        .loading{
            position: absolute;
            top: 50%;
            left: 45%;
            z-index: 9999;
        }
        .content_loading{
            position: relative;
        }
        .content_loading:after {
            content: '';
            background-color: rgba(255, 255, 255, 0.7);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        .square-flip{
        -webkit-perspective: 1000;
        -moz-perspective: 1000;
        -ms-perspective: 1000;
        perspective: 1000;

        -webkit-transform: perspective(1000px);
        -moz-transform: perspective(1000px);
        -ms-transform: perspective(1000px);
        transform: perspective(1000px);

        -webkit-transform-style: preserve-3d; 
        -moz-transform-style: preserve-3d; 
        -ms-transform-style: preserve-3d; 
        transform-style: preserve-3d; 

        /*border:1px solid #efefef;*/
        
        position:relative;
        float:left;
        margin:15px;

        }
        .square-flip{
            width:200px;
            height:200px;
        }
        .square,.square2{
            width:100%;
            height:100%;
        }
        .square{

            background-size: cover;
            background-position:center center;

            -ms-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                -webkit-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
            overflow: hidden;

            position:absolute;
            top:0;


            -webkit-backface-visibility: hidden; 
            backface-visibility: hidden;
        }
        .square-flip .square{
            -webkit-transform: rotateY(0deg);
            -moz-transform: rotateY(0deg);
            -o-transform: rotateY(0deg);
            -ms-transform: rotateY(0deg);
            transform: rotateY(0deg);
            transform-style: preserve-3d;
            z-index:1;
        }
        .square-flip:hover .square{
            -webkit-transform: rotateY(-180deg);
            -moz-transform: rotateY(-180deg);
            -o-transform: rotateY(-180deg);
            -ms-transform: rotateY(-180deg);
            transform: rotateY(-180deg);
            transform-style: preserve-3d;
        }


        .square2{

            background-size: cover;
            background-position:center center;

            -ms-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                -webkit-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
            overflow: hidden;

            position:absolute;
            top:0;

            -webkit-backface-visibility: hidden; 
            backface-visibility: hidden;
        }
        .square-flip .square2{
            -webkit-transform: rotateY(180deg);
            -moz-transform: rotateY(180deg);
            -o-transform: rotateY(180deg);
            -ms-transform: rotateY(180deg);
            transform: rotateY(180deg);
            transform-style: preserve-3d;
            z-index:1;
        }
        .square-flip:hover .square2{
            -webkit-transform: rotateY(0deg);
            -moz-transform: rotateY(0deg);
            -o-transform: rotateY(0deg);
            -ms-transform: rotateY(0deg);
            transform: rotateY(0deg);
            transform-style: preserve-3d;
        }

        /*Square content*/
        .square-container{
            padding:40px;
            text-align:center;
            position:relative;
            top:50%;

            -ms-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                -webkit-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);

        
            -webkit-transform: translateY(-50%) translateX(0px)  scale(1);
            -ms-transform: translateY(-50%) translateX(0px)  scale(1);
    transform: translateY(-50%) translateX(0px)  scale(1);
            transform-style: preserve-3d;
            z-index:2;
        }
        .square-flip:hover .square-container{
            
            -webkit-transform: translateY(-50%) translateX(-650px)  scale(.88);
            -ms-transform: translateY(-50%) translateX(-650px)  scale(.88);
      transform: translateY(-50%) translateX(-650px)  scale(.88);
            transform-style: preserve-3d;

        }

        .square-container2{
            padding:40px;
            text-align:center;
            position:relative;
            top:50%;

            -ms-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                transition: transform 0.60s cubic-bezier(.5,.3,.3,1);
                -webkit-transition: transform 0.60s cubic-bezier(.5,.3,.3,1);

            
            -webkit-transform: translateY(-50%) translateX(650px) translateZ(60px) scale(.88);
            -ms-transform: translateY(-50%) translateX(650px) translateZ(60px) scale(.88);
      transform: translateY(-50%) translateX(650px) translateZ(60px) scale(.88);

            transform-style: preserve-3d;
            z-index:2;
        }
        .square-flip:hover .square-container2{
            
            -webkit-transform: translateY(-50%) translateX(0px) translateZ(0px) scale(1);
            -ms-transform: translateY(-50%) translateX(0px) translateZ(0px) scale(1);
            transform: translateY(-50%) translateX(0px) translateZ(0px) scale(1);
            transform-style: preserve-3d;
        }



        /*Style text*/
        .square-flip h2{
            color:white;
            font-family: "Open Sans";
            font-weight:700;
            font-size:22px;
        }
        .square-flip h3{
            color:white;
            font-family: "Open Sans";
            font-weight:500;
            font-size:16px;
            line-height:26px;
        }
        /*Elements*/
        .flip-overlay{
            display:block;
            background:rgba(0,0,0,0.5);
            width:100%;
            height:100%;
            position:absolute;
            top:0;
        }
        .align-center{
            margin:0 auto;
        }
        .kallyas-button{
            display:block;
            width:160px;
            padding:18px 30px;
            font-family:"Open Sans";
            font-weight:600;
            color:#fff;
            background:#18A689;
            margin:0 auto;
            border-radius:2px;
            text-decoration:none;
        }


        /*ADD SHADOWS OPTIONAL*/
        .square-flip .square .boxshadow, .square-flip .square .textshadow, .square-flip .square2 .boxshadow, .square-flip .square2 .textshadow{
            -ms-transition: 0.60s;
                transition: 0.60s;
                -webkit-transition: 0.60s;
        }

        .square-flip .square .boxshadow{
            -webkit-box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            -moz-box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
        }
        .square-flip .square .textshadow{
            -webkit-text-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            -moz-text-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            text-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
        }
        .square-flip:hover .square .boxshadow, .square-flip:hover .square .textshadow{
            -webkit-box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            -moz-box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
        }


        .square-flip .square2 .boxshadow{
            -webkit-box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            -moz-box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            box-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
        }
        .square-flip .square2 .textshadow{
            -webkit-text-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            -moz-text-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
            text-shadow: 240px 42px 58px -8px rgba(0,0,0,0.0);
        }
        .square-flip:hover .square2 .boxshadow, .square-flip:hover .square2 .textshadow{
            -webkit-box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            -moz-box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            box-shadow: 24px 42px 58px -8px rgba(0,0,0,0.3);
            color: white;
        }

        
        /*You can delete this style*/
        .centerflipcards{
      display:block;
            width:1330px;
      height:440px;
            text-align:center;
            margin:0 auto;
            margin-top:25px;
        }
.clearfix{clear:both;}
.centerflipcards p{
      font-family:"Open Sans";
      font-size:13px;
      margin-top:10px;
      font-weight:700;
}

        .ibox-matricule.sk-loading {
            position: relative;
        }

        .ibox-matricule.sk-loading:after {
            content: '';
            background-color: rgba(255, 255, 255, 0.7);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .matricule-box-result {
            background-color: #2F4050;
            border: 1px solid #e7eaec;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
    </style>

{% endblock %}

{% block body %}

<div class="row wrapper white-bg page-heading mt-5">
    <div class="col-lg-9">
        <h2>Immatriculation</h2>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-7">
            <div class="ibox" >
                <div class="ibox-title">
                    <h5>Recherche matricule</h5>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-6 b-r ibox-matricule">
                            <p>Veuillez définir le numéro de matricule ci-dessous :</p>
                            <form role="form" id="formMatricule" method="POST" action="{{path('matricule_detect')}}">
                                <div class="form-group">
                                    <input type="text" name="matricule" placeholder="Entrez le numéro matricule" class="form-control" id="id-matricule" required>
                                </div> 
                                <div>
                                    <button class="btn btn-sm btn-primary float-right m-t-n-xs"  type="submit"><strong><i class="fa fa-location"></i> Rechercher</strong></button>
                                </div>
                            </form>
                        </div>

                        <div class="col-sm-6 d-flex flex-column justify-content-center align-items-center">
                            <div class="matriculeDetect d-flex flex-column justify-content-center align-items-center">
                                <h4 class="MatriculationCherche d-none">Matricule</h4>
                                <p class="iconLogo">
                                    <i class="mdi mdi-car-info big-icon" style="color: #2F4050"></i>
                                </p>
                            </div>
                            <div class="spiner d-none">
                                <div class="sk-spinner sk-spinner-double-bounce">
                                    <div class="sk-double-bounce1"></div>
                                    <div class="sk-double-bounce2"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-5 matriculeResult d-none">
            <div class="matricule-box-result">
                <div class="row">
                    <div class="col-4">
                        <div class="text-center text-white">
                            <i class="mdi mdi-car-info" style="font-size: 100px"></i>
                            <div class="m-t-xs font-bold">Immatriculation</div>
                        </div>
                    </div>
                    <div class="col-8 d-flex flex-column justify-content-center align-items-center">
                        <h3><strong class="text-white MatriculationResult"></strong></h3>
                        {# <p><i class="fa fa-map-marker"></i> Riviera State 32/106</p>
                        <address>
                            <strong>Twitter, Inc.</strong><br>
                            795 Folsom Ave, Suite 600<br>
                            San Francisco, CA 94107<br>
                            <abbr title="Phone">P:</abbr> (123) 456-7890
                        </address> #}
                    </div>
                </div>
            </div>
        </div>

        {# <div class="square-flip">
        <div class='square' data-image="https://images.unsplash.com/photo-1477313372947-d68a7d410e9f?dpr=1&auto=format&crop=entropy&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb">
            <div class="square-container">
                <div class="align-center"><img src="http://titanicthemes.com/files/flipbox/kallyas2.png" class="boxshadow" alt=""></div>
                <h2 class="textshadow">Kallyas Wp Theme</h2>
                <h3 class="textshadow">The #1 Selling Most Enjoyable and Creative Multipurpose WordPress theme.</h3>
            </div>
            <div class="flip-overlay"></div>
        </div>
        <div class='square2' data-image="https://images.unsplash.com/photo-1477313372947-d68a7d410e9f?dpr=1&auto=format&crop=entropy&fit=crop&w=1500&h=1000&q=80&cs=tinysrgb">
            <div class="square-container2">
                <div class="align-center"></div>
                <h2>#1 Front-end Visual Website Builder in 2016</h2>
            </div>
            <div class="flip-overlay"></div>
        </div>
    </div> #}

    </div>  
</div>
{% endblock %}
{% block javascripts %}
{{ parent() }}
 
 <script>

    $(document).ready(function(){

        //$('.chosen-select').chosen({width: "100%"});
        $(document).on('submit','#formMatricule', function(e){
            e.preventDefault()
            e.stopPropagation()

            let matricule = $('#id-matricule').val();
            let url = $(this).attr('action');

            $('.spiner').removeClass('d-none')
            $('.iconLogo').addClass('d-none')
            $('.ibox-matricule').addClass('sk-loading')
            $('.MatriculationCherche').removeClass('d-none')
            $('.MatriculationCherche').text('Traitement...')
            $('.matriculeResult').addClass('d-none')
            
            $.ajax({
                url: url,
                method: 'POST',
                data: {
                    matricule : matricule,
                },
                success: function (response) {
                    if(response.status){
                        toastr.success(response.message, '')
                        //$('.operateurDetect').removeClass('d-none')
                        $('.spiner').addClass('d-none')
                        $('.matriculeResult').removeClass('d-none')
                        $('.MatriculationCherche').addClass('d-none')
                        $('.MatriculationResult').text(response.matricule)
                        $('.iconLogo').removeClass('d-none')
                        $('.iconLogo').html('<i class="mdi mdi-car-connected big-icon" style="color: #21CC79"></i>')
                        $('.ibox-matricule').removeClass('sk-loading')
                    }else{
                        toastr.warning(response.message, '')
                        $('.spiner').addClass('d-none')
                        $('.ibox-matricule').removeClass('sk-loading')
                        $('.MatriculationCherche').text(response.message)
                        $('.MatriculationCherche').addClass('text-warning')
                        $('.iconLogo').removeClass('d-none')
                        $('.iconLogo').html('<i class="fa fa-warning big-icon text-warning"></i>')
                        $('.iconLogo').addClass('text-warning')
                        $('#id-matricule').val('')
                        $('#id-matricule').addClass('was-invalide')
                        //$('.spiner').addClass('d-none');
                        //$('#ibox-num').children('.ibox-content').removeClass('sk-loading');
                        //$(this).removeClass('was-invalidated');
                    }
                },
                error: function (error) {
                    //window.reload();
                    // console.log("error : " + error)
                    toastr.warning("Erreur", '')
                    $('.spiner').addClass('d-none')
                    $('.ibox-matricule').removeClass('sk-loading')
                    $('.MatriculationCherche').text('Erreur de jeton')
                    $('.MatriculationCherche').addClass('text-warning')
                    $('.iconLogo').removeClass('d-none')
                    $('.iconLogo').html('<i class="fa fa-warning big-icon text-warning"></i>')
                    $('.iconLogo').addClass('text-warning')
                    $('#id-matricule').val('')
                    $('#id-matricule').addClass('was-invalide')
                }
            })
            $(this).addClass('was-validated');
        });
    });
</script>
{% endblock %}
